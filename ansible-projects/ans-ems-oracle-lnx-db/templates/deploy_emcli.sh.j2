#!/bin/bash 
# EM13c EMCLI API Deploy Script generated by ANSIBLE 

{% if ( (srvrole == 'DEV') and (srvloc == 'NA') ) %}
echo "Fetching and Deploying EM13c Client from NA EM13c DEV"
cd {{ agt_inst_dir.em_dir }}
wget --no-check-certificate {{ em13c_loc.nadev }}:7803/em/public_lib_download/emcli/kit/emcliadvancedkit.jar
{{ agt_inst_dir.install_dir }}/{{ em13c_agent_version }}/jdk/jre/bin/java -jar emcliadvancedkit.jar -install_dir={{ agt_inst_dir.em_dir }}

./emcli setup -url={{ em13c_loc.nadev }}:7803/em -username=sysman -password={{ emsys_pw }} -dir={{ agt_inst_dir.em_dir }} -trustall

{% elif ( (srvrole == 'PROD') and (srvloc == 'NA') ) %}
echo "Fetching and Deploying EM13c Client from NA EM13c PROD"
cd {{ agt_inst_dir.em_dir }}
wget --no-check-certificate {{ em13c_loc.naprod }}:7803/em/public_lib_download/emcli/kit/emcliadvancedkit.jar
{{ agt_inst_dir.install_dir }}/{{ em13c_agent_version }}/jdk/jre/bin/java -jar emcliadvancedkit.jar -install_dir={{ agt_inst_dir.em_dir }}

./emcli setup -url={{ em13c_loc.naprod }}:7803/em -username=sysman -password={{ emsys_pw }} -dir={{ agt_inst_dir.em_dir }} -trustall

{% elif ( (srvrole == 'DEV') and (srvloc == 'EU') ) %}
echo "Fetching and Deploying EM13c Client from EU EM13c DEV"
cd {{ agt_inst_dir.em_dir }}
wget --no-check-certificate {{ em13c_loc.eudev }}:7803/em/public_lib_download/emcli/kit/emcliadvancedkit.jar
{{ agt_inst_dir.install_dir }}/{{ em13c_agent_version }}/jdk/jre/bin/java -jar emcliadvancedkit.jar -install_dir={{ agt_inst_dir.em_dir }}

./emcli setup -url={{ em13c_loc.eudev }}:7803/em -username=sysman -password={{ emsys_pw }} -dir={{ agt_inst_dir.em_dir }} -trustall

{% elif ( (srvrole == 'PROD') and (srvloc == 'EU') ) %}
echo "Fetching and Deploying EM13c Client from EU EM13c PROD"
cd {{ agt_inst_dir.em_dir }}
wget --no-check-certificate {{ em13c_loc.euprod }}:7803/em/public_lib_download/emcli/kit/emcliadvancedkit.jar
{{ agt_inst_dir.install_dir }}/{{ em13c_agent_version }}/jdk/jre/bin/java -jar emcliadvancedkit.jar -install_dir={{ agt_inst_dir.em_dir }}

./emcli setup -url={{ em13c_loc.euprod }}:7803/em -username=sysman -password={{ emsys_pw }} -dir={{ agt_inst_dir.em_dir }} -trustall

{% else %}
{% endif %}